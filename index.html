<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Système d'Information PMEESA - Activité 1</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="https://unpkg.com/lucide@latest"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;700&display=swap');
        body { font-family: 'Inter', sans-serif; scroll-behavior: smooth; }
        .chart-container { position: relative; height: 300px; width: 100%; }
        .nav-active { @apply bg-emerald-600 text-white; }
        .glass-card { background: rgba(255, 255, 255, 0.9); backdrop-filter: blur(10px); }
    </style>
</head>
<body class="bg-slate-50 text-slate-900">

    <div class="flex min-h-screen">
        <!-- BARRE LATERALE -->
        <aside class="w-72 bg-slate-900 text-white flex-shrink-0 hidden lg:flex flex-col sticky top-0 h-screen">
            <div class="p-8">
                <div class="flex items-center gap-3 mb-10">
                    <div class="bg-emerald-500 p-2 rounded-xl shadow-lg shadow-emerald-500/20">
                        <i data-lucide="database" class="w-6 h-6"></i>
                    </div>
                    <div>
                        <h1 class="font-bold text-lg leading-tight">PMEESA</h1>
                        <p class="text-[10px] text-slate-400 uppercase tracking-widest">Système Statistique</p>
                    </div>
                </div>
                
                <nav class="space-y-2">
                    <button onclick="showSection('accueil')" id="btn-accueil" class="nav-btn flex items-center gap-3 w-full p-3.5 rounded-xl transition-all duration-200 bg-emerald-600">
                        <i data-lucide="home" class="w-5 h-5"></i> <span>Accueil & Projet</span>
                    </button>
                    <button onclick="showSection('dashboard')" id="btn-dashboard" class="nav-btn flex items-center gap-3 w-full p-3.5 rounded-xl transition-all duration-200 hover:bg-slate-800 text-slate-400 hover:text-white">
                        <i data-lucide="bar-chart-big" class="w-5 h-5"></i> <span>Tableau de Bord</span>
                    </button>
                    <button onclick="showSection('collecte')" id="btn-collecte" class="nav-btn flex items-center gap-3 w-full p-3.5 rounded-xl transition-all duration-200 hover:bg-slate-800 text-slate-400 hover:text-white">
                        <i data-lucide="form-input" class="w-5 h-5"></i> <span>Collecte (Kobo)</span>
                    </button>
                    <button onclick="showSection('rapport')" id="btn-rapport" class="nav-btn flex items-center gap-3 w-full p-3.5 rounded-xl transition-all duration-200 hover:bg-slate-800 text-slate-400 hover:text-white">
                        <i data-lucide="file-text" class="w-5 h-5"></i> <span>Rapport Auto</span>
                    </button>
                </nav>
            </div>
            
            <div class="mt-auto p-8 border-t border-slate-800 bg-slate-900/50">
                <div class="flex items-center gap-3 mb-4">
                    <div class="w-2 h-2 rounded-full bg-green-500 animate-pulse"></div>
                    <span class="text-xs text-slate-300">Système Opérationnel</span>
                </div>
                <p class="text-[10px] text-slate-500">© 2024 République du Cameroun - MINPMEESA / CELSTAT</p>
            </div>
        </aside>

        <!-- CONTENU PRINCIPAL -->
        <main class="flex-1 flex flex-col">
            <!-- HEADER -->
            <header class="bg-white/80 backdrop-blur-md border-b sticky top-0 z-40 px-8 py-4 flex justify-between items-center">
                <div>
                    <h2 id="section-title" class="text-xl font-bold text-slate-800">Présentation de l'Activité 1</h2>
                    <p class="text-xs text-slate-500">Modernisation du Système d'Information Statistique</p>
                </div>
                <div class="flex items-center gap-4">
                    <div class="hidden md:block text-right mr-2">
                        <p class="text-sm font-bold">MINPMEESA</p>
                        <p class="text-[10px] text-slate-500">Division de la Statistique</p>
                    </div>
                    <div class="h-10 w-10 rounded-full bg-slate-100 border flex items-center justify-center">
                        <i data-lucide="user" class="w-5 h-5 text-slate-600"></i>
                    </div>
                </div>
            </header>

            <div class="p-8 max-w-7xl mx-auto w-full">

                <!-- SECTION 1 : ACCUEIL / PROJET -->
                <section id="section-accueil" class="space-y-8 animate-in fade-in duration-500">
                    <div class="grid grid-cols-1 lg:grid-cols-3 gap-8">
                        <div class="lg:col-span-2 space-y-6">
                            <div class="bg-gradient-to-br from-emerald-600 to-teal-700 text-white p-10 rounded-3xl shadow-xl relative overflow-hidden">
                                <i data-lucide="award" class="absolute -right-10 -bottom-10 w-64 h-64 opacity-10"></i>
                                <h3 class="text-3xl font-bold mb-4">Activité 1 : Questionnaires et Formulaires Actualisés</h3>
                                <p class="text-emerald-50 leading-relaxed mb-6 text-lg">
                                    L'objectif majeur est de mettre à disposition des outils de collecte numériques, harmonisés et opérationnels, permettant une collecte fiable, traçable et exploitable des données statistiques PMEESA.
                                </p>
                                <div class="flex flex-wrap gap-4 text-sm font-semibold">
                                    <span class="bg-white/20 backdrop-blur px-4 py-2 rounded-full flex items-center gap-2"><i data-lucide="check-circle" class="w-4 h-4"></i> Fiabilité</span>
                                    <span class="bg-white/20 backdrop-blur px-4 py-2 rounded-full flex items-center gap-2"><i data-lucide="eye" class="w-4 h-4"></i> Traçabilité</span>
                                    <span class="bg-white/20 backdrop-blur px-4 py-2 rounded-full flex items-center gap-2"><i data-lucide="zap" class="w-4 h-4"></i> Exploitation immédiate</span>
                                </div>
                            </div>

                            <div class="bg-white p-8 rounded-3xl border border-slate-100 shadow-sm">
                                <h4 class="text-lg font-bold mb-6 flex items-center gap-2">
                                    <i data-lucide="list-checks" class="text-emerald-600"></i> Étapes de Mise en Œuvre
                                </h4>
                                <div class="space-y-4">
                                    <div class="flex gap-4 items-start p-4 hover:bg-slate-50 rounded-2xl transition">
                                        <div class="w-10 h-10 rounded-full bg-emerald-100 text-emerald-700 flex-shrink-0 flex items-center justify-center font-bold">1</div>
                                        <div>
                                            <p class="font-bold">Définition des variables</p>
                                            <p class="text-sm text-slate-500">Identification et structuration des indicateurs sectoriels prioritaires (PME, Artisanat, OES).</p>
                                        </div>
                                    </div>
                                    <div class="flex gap-4 items-start p-4 hover:bg-slate-50 rounded-2xl transition">
                                        <div class="w-10 h-10 rounded-full bg-emerald-100 text-emerald-700 flex-shrink-0 flex items-center justify-center font-bold">2</div>
                                        <div>
                                            <p class="font-bold">Choix de l'outil numérique</p>
                                            <p class="text-sm text-slate-500">Sélection de KoboToolbox pour ses capacités d'intégration et de traitement en temps réel.</p>
                                        </div>
                                    </div>
                                    <div class="flex gap-4 items-start p-4 hover:bg-slate-50 rounded-2xl transition">
                                        <div class="w-10 h-10 rounded-full bg-emerald-100 text-emerald-700 flex-shrink-0 flex items-center justify-center font-bold">3</div>
                                        <div>
                                            <p class="font-bold">Opérationnalisation et Tests</p>
                                            <p class="text-sm text-slate-500">Simulations de collecte et enquêtes pilotes pour garantir la stabilité technique.</p>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="space-y-6">
                            <div class="bg-slate-900 text-white p-8 rounded-3xl shadow-xl">
                                <h4 class="font-bold mb-4 uppercase text-xs tracking-widest text-emerald-400">Acteurs Clés (RMO)</h4>
                                <ul class="space-y-4">
                                    <li class="flex items-center gap-3">
                                        <div class="w-8 h-8 rounded-full bg-slate-800 flex items-center justify-center"><i data-lucide="user-cog" class="w-4 h-4"></i></div>
                                        <span class="text-sm">CELSTAT (Coordination)</span>
                                    </li>
                                    <li class="flex items-center gap-3">
                                        <div class="w-8 h-8 rounded-full bg-slate-800 flex items-center justify-center"><i data-lucide="user-check" class="w-4 h-4"></i></div>
                                        <span class="text-sm">Mme Joubaida (Critères & Outils)</span>
                                    </li>
                                    <li class="flex items-center gap-3">
                                        <div class="w-8 h-8 rounded-full bg-slate-800 flex items-center justify-center"><i data-lucide="user" class="w-4 h-4"></i></div>
                                        <span class="text-sm">M. Nnouh (Diagnostic variables)</span>
                                    </li>
                                </ul>
                                <button onclick="showSection('collecte')" class="w-full mt-8 bg-emerald-500 hover:bg-emerald-400 text-slate-900 font-bold py-3 rounded-xl transition">
                                    Lancer la Collecte
                                </button>
                            </div>
                            
                            <div class="bg-emerald-50 p-6 rounded-3xl border border-emerald-100">
                                <h4 class="font-bold text-emerald-800 mb-2">Résultat Attendu</h4>
                                <p class="text-sm text-emerald-700 leading-relaxed italic">
                                    "Un annuaire statistique digitalisé et fiable permettant une prise de décision éclairée au sein du MINPMEESA."
                                </p>
                            </div>
                        </div>
                    </div>
                </section>

                <!-- SECTION 2 : DASHBOARD -->
                <section id="section-dashboard" class="hidden space-y-6 animate-in fade-in duration-500">
                    <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6">
                        <div class="bg-white p-6 rounded-2xl shadow-sm border border-slate-100">
                            <p class="text-slate-500 text-xs font-bold uppercase mb-1">Stock Total PME</p>
                            <div class="flex items-end justify-between">
                                <h3 class="text-3xl font-black">443 524</h3>
                                <span class="text-emerald-500 text-xs font-bold flex items-center"><i data-lucide="arrow-up-right" class="w-3 h-3"></i> 12.8%</span>
                            </div>
                        </div>
                        <div class="bg-white p-6 rounded-2xl shadow-sm border border-slate-100">
                            <p class="text-slate-500 text-xs font-bold uppercase mb-1">Nouvelles Créations</p>
                            <div class="flex items-end justify-between">
                                <h3 class="text-3xl font-black">21 132</h3>
                                <span class="text-blue-500 text-xs font-bold uppercase">Record CFCE</span>
                            </div>
                        </div>
                        <div class="bg-white p-6 rounded-2xl shadow-sm border border-slate-100">
                            <p class="text-slate-500 text-xs font-bold uppercase mb-1">OES Créées</p>
                            <div class="flex items-end justify-between">
                                <h3 class="text-3xl font-black">3 909</h3>
                                <span class="text-emerald-500 text-xs font-bold uppercase">+10.0%</span>
                            </div>
                        </div>
                        <div class="bg-white p-6 rounded-2xl shadow-sm border border-slate-100">
                            <p class="text-slate-500 text-xs font-bold uppercase mb-1">Emplois Prévus</p>
                            <div class="flex items-end justify-between">
                                <h3 class="text-3xl font-black">97 000+</h3>
                                <span class="text-purple-500 text-xs font-bold uppercase">Impact Fort</span>
                            </div>
                        </div>
                    </div>

                    <div class="grid grid-cols-1 lg:grid-cols-2 gap-8">
                        <div class="bg-white p-8 rounded-3xl shadow-sm border border-slate-100">
                            <h4 class="font-bold mb-6 flex items-center gap-2"><i data-lucide="pie-chart" class="text-emerald-600"></i> Répartition par Secteur</h4>
                            <div class="chart-container">
                                <canvas id="sectorChart"></canvas>
                            </div>
                        </div>
                        <div class="bg-white p-8 rounded-3xl shadow-sm border border-slate-100">
                            <h4 class="font-bold mb-6 flex items-center gap-2"><i data-lucide="map" class="text-emerald-600"></i> Créations par Région (Top)</h4>
                            <div class="chart-container">
                                <canvas id="regionChart"></canvas>
                            </div>
                        </div>
                    </div>
                </section>

                <!-- SECTION 3 : COLLECTE (KOBO) -->
                <section id="section-collecte" class="hidden space-y-6 animate-in fade-in duration-500">
                    <div class="bg-white rounded-3xl shadow-xl border border-slate-200 overflow-hidden">
                        <div class="bg-slate-900 p-6 text-white flex justify-between items-center">
                            <div>
                                <h3 class="font-bold text-lg">Saisie Numérique KoboToolbox</h3>
                                <p class="text-xs text-slate-400">Actualisation des indicateurs Act1</p>
                            </div>
                            <button onclick="window.open('https://ee.kobotoolbox.org/x/5OfrrL9k', '_blank')" class="bg-emerald-500 text-slate-900 px-4 py-2 rounded-lg font-bold text-sm flex items-center gap-2 hover:bg-emerald-400">
                                <i data-lucide="maximize-2" class="w-4 h-4"></i> Mode Plein Écran
                            </button>
                        </div>
                        <div class="bg-slate-100 aspect-video lg:h-[700px] w-full relative">
                            <!-- Integration Iframe du lien -->
                            <iframe src="https://ee.kobotoolbox.org/x/5OfrrL9k" class="w-full h-full border-none shadow-inner" title="Questionnaire PMEESA"></iframe>
                        </div>
                        <div class="p-4 bg-emerald-50 text-emerald-700 text-xs font-medium text-center">
                            <i data-lucide="shield-check" class="w-3 h-3 inline mr-1"></i> Données sécurisées et synchronisées en temps réel vers la base CELSTAT.
                        </div>
                    </div>
                </section>

                <!-- SECTION 4 : RAPPORT AUTOMATIQUE -->
                <section id="section-rapport" class="hidden space-y-8 animate-in fade-in duration-500">
                    <div class="bg-white p-8 rounded-3xl shadow-sm border border-slate-100">
                        <div class="flex flex-col md:flex-row justify-between items-start md:items-center gap-6 mb-8">
                            <div>
                                <h3 class="text-2xl font-bold">Rédaction de Rapport Automatique</h3>
                                <p class="text-slate-500">Synthèse basée sur les résultats de l'Activité 1</p>
                            </div>
                            <div class="flex gap-2 w-full md:w-auto">
                                <button onclick="simulateExport('PDF')" class="flex-1 md:flex-none flex items-center justify-center gap-2 bg-rose-600 text-white px-5 py-2.5 rounded-xl font-bold hover:bg-rose-700 transition">
                                    <i data-lucide="file-down" class="w-4 h-4"></i> PDF
                                </button>
                                <button onclick="simulateExport('Word')" class="flex-1 md:flex-none flex items-center justify-center gap-2 bg-blue-600 text-white px-5 py-2.5 rounded-xl font-bold hover:bg-blue-700 transition">
                                    <i data-lucide="file-check" class="w-4 h-4"></i> Word
                                </button>
                                <button onclick="simulateExport('HTML')" class="flex-1 md:flex-none flex items-center justify-center gap-2 bg-slate-800 text-white px-5 py-2.5 rounded-xl font-bold hover:bg-slate-900 transition">
                                    <i data-lucide="code" class="w-4 h-4"></i> HTML
                                </button>
                            </div>
                        </div>

                        <!-- Prévisualisation du Rapport -->
                        <div id="report-content" class="bg-slate-50 border-2 border-dashed border-slate-200 rounded-3xl p-4 md:p-12 overflow-y-auto max-h-[600px]">
                            <div class="bg-white shadow-2xl p-8 md:p-16 max-w-4xl mx-auto rounded shadow-slate-200/50 min-h-[1000px]">
                                <div class="text-center mb-12">
                                    <p class="uppercase font-bold text-xs tracking-[0.2em] text-slate-400 mb-2">République du Cameroun</p>
                                    <p class="font-bold text-sm mb-6">Ministère des PMEESA / Division de la Statistique</p>
                                    <div class="w-20 h-1 bg-emerald-500 mx-auto mb-8"></div>
                                    <h1 class="text-3xl font-black text-slate-800 underline mb-4 uppercase">Rapport de Synthèse Statistique</h1>
                                    <p class="text-slate-500 font-medium">Activité 1 : Harmonisation des questionnaires de collecte</p>
                                    <p class="text-xs text-slate-400 mt-2">Généré le 13 Février 2026</p>
                                </div>

                                <div class="space-y-10 text-slate-700 leading-relaxed text-sm text-justify">
                                    <section>
                                        <h2 class="text-emerald-700 font-black uppercase text-xs mb-3 border-b-2 border-emerald-100 pb-1 italic">I. Contexte et Diagnostic</h2>
                                        <p>Conformément au chronogramme d'exécution de l'Activité 1, un diagnostic exhaustif des questionnaires antérieurs a été mené. Ce travail a permis d'identifier les redondances et de structurer l'ensemble des variables essentielles (PME, Artisanat, OES).</p>
                                    </section>

                                    <section>
                                        <h2 class="text-emerald-700 font-black uppercase text-xs mb-3 border-b-2 border-emerald-100 pb-1 italic">II. Méthodologie et Choix Technologique</h2>
                                        <p>L'outil <strong>KoboToolbox</strong> a été retenu pour son interopérabilité. Les indicateurs ont été classés par thématique (Production, Chiffre d'affaires, Emploi) avec une définition claire de la périodicité et des sources de données.</p>
                                    </section>

                                    <section>
                                        <h2 class="text-emerald-700 font-black uppercase text-xs mb-3 border-b-2 border-emerald-100 pb-1 italic">III. Analyse Prévisionnelle des Données</h2>
                                        <p>Les premières simulations de collecte projettent un stock de <strong>443 524 PME</strong>. La dynamique de création reste portée par les secteurs des services (45%) et du commerce (35%). Les prévisions d'emplois indiquent un impact social fort de plus de 97 000 postes.</p>
                                    </section>

                                    <section class="bg-emerald-50 p-6 rounded-2xl">
                                        <h2 class="text-emerald-800 font-bold mb-2">Conclusion</h2>
                                        <p class="text-emerald-700 text-xs italic">Les tests d'opérationnalisation confirment que le questionnaire numérique est prêt pour le déploiement à grande échelle après validation finale par le CELSTAT.</p>
                                    </section>
                                </div>

                                <div class="mt-20 pt-10 border-t flex justify-between items-center text-[10px] text-slate-400 uppercase font-bold tracking-widest">
                                    <span>Division CELSTAT</span>
                                    <span>SI-PMEESA 2024</span>
                                </div>
                            </div>
                        </div>
                    </div>
                </section>

            </div>
        </main>
    </div>

    <!-- Script pour le comportement de l'app -->
    <script>
        // Initialisation des icônes
        lucide.createIcons();

        // Gestion de la navigation
        function showSection(id) {
            document.querySelectorAll('section').forEach(s => s.classList.add('hidden'));
            document.getElementById('section-' + id).classList.remove('hidden');

            // Mise à jour de l'apparence des boutons nav
            document.querySelectorAll('.nav-btn').forEach(btn => {
                btn.classList.remove('bg-emerald-600', 'text-white');
                btn.classList.add('text-slate-400', 'hover:bg-slate-800', 'hover:text-white');
            });
            document.getElementById('btn-' + id).classList.add('bg-emerald-600', 'text-white');
            document.getElementById('btn-' + id).classList.remove('text-slate-400', 'hover:bg-slate-800');

            // Mise à jour du titre header
            const titles = {
                'accueil': "Présentation de l'Activité 1",
                'dashboard': "Tableau de Bord Statistique PMEESA",
                'collecte': "Interface de Collecte KoboToolbox",
                'rapport': "Rédaction & Rapport Automatique"
            };
            document.getElementById('section-title').innerText = titles[id];
            
            // Re-render charts if going to dashboard
            if(id === 'dashboard') {
                setTimeout(initCharts, 100);
            }
        }

        // Initialisation des graphiques
        function initCharts() {
            const ctxSector = document.getElementById('sectorChart');
            if(ctxSector) {
                new Chart(ctxSector, {
                    type: 'doughnut',
                    data: {
                        labels: ['Services', 'Commerce', 'Industrie', 'Artisanat', 'Social'],
                        datasets: [{
                            data: [45, 35, 10, 7, 3],
                            backgroundColor: ['#059669', '#3b82f6', '#f59e0b', '#6366f1', '#ef4444'],
                            borderWidth: 0,
                            hoverOffset: 15
                        }]
                    },
                    options: { maintainAspectRatio: false, plugins: { legend: { position: 'bottom' } } }
                });
            }

            const ctxRegion = document.getElementById('regionChart');
            if(ctxRegion) {
                new Chart(ctxRegion, {
                    type: 'bar',
                    data: {
                        labels: ['Littoral', 'Centre', 'Ouest', 'Nord', 'Sud'],
                        datasets: [{
                            label: 'PME (Milliers)',
                            data: [152, 140, 65, 42, 38],
                            backgroundColor: '#10b981',
                            borderRadius: 12
                        }]
                    },
                    options: { 
                        maintainAspectRatio: false, 
                        scales: { y: { display: false }, x: { grid: { display: false } } },
                        plugins: { legend: { display: false } }
                    }
                });
            }
        }

        // Export simulé
        function simulateExport(format) {
            const btn = event.currentTarget;
            const originalText = btn.innerHTML;
            btn.innerHTML = `<i data-lucide="loader-2" class="w-4 h-4 animate-spin"></i> Génération...`;
            lucide.createIcons();
            
            setTimeout(() => {
                btn.innerHTML = `<i data-lucide="check" class="w-4 h-4"></i> Téléchargé`;
                lucide.createIcons();
                // Simulation téléchargement
                const link = document.createElement('a');
                link.href = '#';
                link.download = `Rapport_PMEESA_Activité1.${format.toLowerCase()}`;
                document.body.appendChild(link);
                // link.click(); // Désactivé pour le prototype
                document.body.removeChild(link);
                
                setTimeout(() => {
                    btn.innerHTML = originalText;
                    lucide.createIcons();
                }, 2000);
            }, 1500);
        }

        window.onload = function() {
            // Pas d'appel auto à initCharts ici car la section est masquée
        };
    </script>
</body>
</html>
